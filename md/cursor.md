# Лендинг студии дизайна интерьеров Анны Пакселевой

## Репозиторий

**GitHub:** https://github.com/pakartem94/AnnaPakseleva

## Общее описание

Одностраничный продающий лендинг для студии дизайна интерьеров в Калининграде. Цель — привести пользователя к первому контакту (консультация или расчёт стоимости).

## Структура проекта

```
AnnaPakseleva/
├── index.php           # Основная страница
├── css/
│   ├── style.css       # Основные стили (BEM, CSS-переменные)
│   ├── tablet.css      # Стили для планшетов (768px-1199px)
│   └── mobile.css      # Стили для мобильных устройств (max-width: 767px)
├── js/
│   ├── main.js         # Основной JavaScript функционал
│   ├── reviews.js      # Загрузка отзывов из БД
│   ├── tablet.js       # JavaScript для планшетов
│   └── mobile.js       # JavaScript для мобильных устройств
├── api/
│   ├── send.php        # Обработчик форм
│   ├── reviews.php     # API для получения отзывов
│   └── db-schema.sql   # Схема базы данных
├── admin/              # Админ-панель
│   ├── config.php      # Конфигурация БД и функции
│   ├── login.php       # Страница входа
│   ├── dashboard.php   # Главная страница админки
│   ├── reviews.php     # Управление отзывами
│   ├── portfolio.php   # Управление портфолио
│   ├── leads.php       # CRM для заявок
│   ├── sidebar.php     # Боковое меню
│   ├── admin.css       # Стили админки
│   ├── admin.js        # JavaScript админки
│   └── api/
│       ├── reviews.php # API управления отзывами
│       ├── portfolio.php # API управления портфолио
│       └── leads.php   # API управления заявками
├── img/
│   ├── logo.PNG        # Логотип
│   ├── photo_*.webp    # Фото для секций
│   └── portfolio/      # Портфолио
│       ├── 1/          # Проект 1 (45 изображений)
│       ├── 2/          # Проект 2 (74 изображения)
│       └── 3/          # Проект 3 (45 изображений)
├── logs/               # Логи заявок (создаётся автоматически)
├── md/
│   └── cursor.md       # Документация
└── tz/
    └── tz.txt          # Техническое задание
```

## Технологии

- **HTML5** — семантическая разметка
- **CSS3** — BEM-методология, CSS-переменные, адаптивная вёрстка
- **JavaScript** — Vanilla JS, без библиотек
- **PHP** — обработка форм, отправка email, админ-панель
- **MySQL** — база данных для отзывов, портфолио и заявок

## Админ-панель

### Доступ

Админ-панель доступна по адресу: `/admin/`

**Дефолтные учётные данные:**
- Логин: `admin`
- Пароль: `admin123`

⚠️ **Важно:** После первого входа обязательно смените пароль!

### Функционал

1. **Управление отзывами** (`/admin/reviews.php`)
   - Добавление новых отзывов
   - Редактирование существующих
   - Удаление отзывов
   - Управление порядком сортировки
   - Публикация/скрытие отзывов

2. **Управление портфолио** (`/admin/portfolio.php`)
   - Добавление проектов
   - Редактирование проектов
   - Удаление проектов
   - Сортировка проектов
   - Активация/деактивация проектов

3. **CRM для заявок** (`/admin/leads.php`)
   - Просмотр всех заявок с сайта
   - Фильтрация по статусам (новые, связались, в работе, завершены, отклонены)
   - Изменение статуса заявки
   - Добавление заметок к заявкам
   - Удаление заявок

### База данных

Для работы админ-панели необходимо выполнить SQL-скрипт `api/db-schema.sql`, который создаст следующие таблицы:

- `leads` — заявки с сайта
- `reviews` — отзывы клиентов
- `portfolio_projects` — проекты портфолио
- `admins` — администраторы

### Email-уведомления

Все заявки с сайта автоматически отправляются на email `ann-ki@mail.ru` с адреса `no-reply@studioap.ru`.

## CSS-переменные

Все цвета и отступы определены в `:root` в `css/style.css`:

### Цвета
- `--color-bg-main` — основной фон (#E5DDD4)
- `--color-bg-dark` — тёмный фон (#1F2938)
- `--color-primary` — винно-бордовый (#5A1D33)
- `--color-accent-blue` — пыльно-голубой (#8EA4B8)
- `--color-highlight-gold` — золотой акцент (#D3B46A)

### Типографика
- `--font-heading` — Cormorant Garamond (заголовки)
- `--font-sans` — Inter (основной текст)

## Секции лендинга

1. **Hero** — главный экран с CTA
2. **Services** — что входит в дизайн-проект (карточки с иконкой слева и текстом справа)
3. **Stages** — этапы работы (таймлайн)
4. **Tariffs** — 3 тарифа (Стандарт, Расширенный, Полный контроль)
5. **Portfolio** — галерея с табами по проектам
6. **Why Us** — преимущества студии
7. **Pains** — боли клиентов и решения
8. **Gifts** — подарки к проекту
9. **About** — о руководителе студии
10. **Reviews** — отзывы клиентов (загружаются из БД)
11. **FAQ** — аккордеон с вопросами
12. **Contact** — форма заявки и контакты

## Формы

### Основная форма (секция Contact)
Поля:
- Имя (обязательное)
- Телефон (обязательное, с маской)
- Тип объекта (select)
- Площадь (number)
- Этап (select)
- Комментарий (textarea)

### Модальная форма
Открывается по кнопкам "Консультация" и "Выбрать тариф".
Автозаполнение поля тарифа при выборе из секции Tariffs.

### Защита
- Honeypot-поле (скрытое)
- Возможность подключения reCAPTCHA (код готов)

## JavaScript функционал

### Основной функционал (`js/main.js`)
- **Sticky header** — при скролле
- **Мобильное меню** — бургер
- **Модальные окна** — с анимацией
- **Маска телефона** — +7 (___) ___-__-__
- **FAQ аккордеон** — раскрывающиеся ответы
- **Портфолио** — табы, lazy loading, lightbox
- **Scroll-анимации** — fade-in при появлении
- **Smooth scroll** — плавная прокрутка к якорям

### Загрузка отзывов (`js/reviews.js`)
- Автоматическая загрузка отзывов из БД при загрузке страницы
- Отображение первых 4 отзывов
- Кнопка "Показать ещё" для загрузки остальных
- Плавная анимация появления новых отзывов

### Планшетный функционал (`js/tablet.js`)
- **Touch-события** — оптимизация свайпов в lightbox
- **Адаптация портфолио** — оптимизация для планшетов
- **Lazy loading** — улучшенная загрузка изображений с приоритетом

### Мобильный функционал (`js/mobile.js`)
- **Touch-события** — оптимизация свайпов в lightbox и портфолио
- **Адаптация портфолио** — сетка 2 колонки для мобильных
- **Оптимизация меню** — улучшенная работа мобильного меню
- **Оптимизация форм** — предотвращение zoom на iOS, улучшенная работа с клавиатурой
- **Производительность** — оптимизация для мобильных устройств, поддержка reduced-motion
- **Lazy loading** — улучшенная загрузка изображений с увеличенным rootMargin

## API

### POST /api/send.php

Отправка формы.

**Параметры:**
- `name` — имя (обязательно)
- `phone` — телефон (обязательно)
- `form_type` — тип формы (consultation/tariff)
- `tariff` — выбранный тариф
- `object_type` — тип объекта
- `area` — площадь
- `stage` — этап
- `comment` — комментарий
- `utm_*` — UTM-метки

**Ответ:**
```json
{
  "success": true,
  "message": "Заявка успешно отправлена"
}
```

### GET /api/reviews.php

Получение опубликованных отзывов для главной страницы.

**Ответ:**
```json
[
  {
    "id": 1,
    "name": "Имя клиента",
    "project": "Квартира 85 м²",
    "text": "Текст отзыва",
    "rating": 5,
    "avatar_initials": "ИК",
    "is_published": 1,
    "sort_order": 0
  }
]
```

## Адаптивные брейкпоинты

- **Desktop** — ≥1200px (основной CSS)
- **Tablet** — 768–1199px (отдельные файлы `css/tablet.css` и `js/tablet.js`)
- **Mobile** — <768px (отдельные файлы `css/mobile.css` и `js/mobile.js`)

## Настройка

### Email
В файле `api/send.php` настроены:
- `email_to` — `ann-ki@mail.ru`
- `email_from` — `no-reply@studioap.ru`

### База данных
1. Создайте БД и выполните `api/db-schema.sql`
2. Настройте параметры подключения в `admin/config.php` и `api/send.php`

### Яндекс.Метрика
В `index.php` перед закрывающим тегом `</body>` добавьте:
```html
<script>
  window.YANDEX_METRIKA_ID = 12345678; // Ваш ID счётчика
</script>
<!-- Yandex.Metrika counter -->
```

## Секция отзывов

Отзывы загружаются динамически из базы данных через API `/api/reviews.php`. 

В админ-панели можно:
- Добавлять новые отзывы
- Редактировать существующие
- Управлять порядком отображения (поле `sort_order`)
- Публиковать/скрывать отзывы

Изначально показываются первые 4 отзыва, остальные скрыты. Кнопка "Показать ещё" загружает по 4 отзыва за раз с плавной анимацией появления.

Каждая карточка содержит:
- Аватар с инициалами (генерируется автоматически)
- Имя клиента
- Тип и площадь проекта
- Рейтинг (1-5 звёзд)
- Текст отзыва

## Аналитика (готово к подключению)

События для отслеживания:
- `form_submit` — отправка формы
- `whatsapp` — клик WhatsApp
- `telegram` — клик Telegram
- `phone_click` — клик по телефону

## Исправления

### Восстановление главной страницы
- Восстановлен `js/main.js` из git (файл был пустым)
- Исправлена секция отзывов: добавлен `id="reviewsGrid"` для динамической загрузки отзывов из БД
- Добавлено подключение `js/reviews.js` в `index.php`
- Удалены статические отзывы из HTML (теперь загружаются динамически через API)

### Замена домена
- Заменён домен `https://annapakseleva.ru` на `https://studioap.ru` во всех файлах:
  - `index.php` — мета-теги, Open Graph, Twitter Card, Schema.org
  - `robots.txt` — sitemap URL
  - `sitemap.xml` — все URL страниц и изображений

### Исправление модального окна добавления отзывов
- Полностью переработан JavaScript в `admin/reviews.php`:
  - Заменены все inline-обработчики (`onclick`) на `addEventListener` для более надёжной работы
  - Весь код обёрнут в `DOMContentLoaded` для гарантированной загрузки DOM
  - Добавлены проверки существования всех элементов перед использованием
  - Улучшена обработка ошибок при загрузке данных отзыва
  - Заменён inline-стиль на CSS-класс `modal--hidden` для управления отображением
  - Кнопки "Добавить отзыв" и "Редактировать" теперь используют data-атрибуты и обработчики событий
- Модальное окно теперь корректно открывается при клике на кнопку "Добавить отзыв"
