# Лендинг студии дизайна интерьеров Анны Пакселевой

## Репозиторий

**GitHub:** https://github.com/pakartem94/AnnaPakseleva

## Общее описание

Одностраничный продающий лендинг для студии дизайна интерьеров в Калининграде. Цель — привести пользователя к первому контакту (консультация или расчёт стоимости).

## Структура проекта

```
AnnaPakseleva/
├── index.php           # Основная страница
├── css/
│   ├── style.css       # Основные стили (BEM, CSS-переменные)
│   ├── tablet.css      # Стили для планшетов (768px-1199px)
│   └── mobile.css      # Стили для мобильных устройств (max-width: 767px)
├── js/
│   ├── main.js         # Основной JavaScript функционал
│   ├── tablet.js       # JavaScript для планшетов
│   └── mobile.js       # JavaScript для мобильных устройств
├── api/
│   ├── send.php        # Обработчик форм
│   └── db-schema.sql   # Схема базы данных
├── img/
│   ├── logo.PNG        # Логотип
│   ├── photo_*.webp    # Фото для секций
│   └── portfolio/      # Портфолио
│       ├── 1/          # Проект 1 (45 изображений)
│       ├── 2/          # Проект 2 (74 изображения)
│       └── 3/          # Проект 3 (45 изображений)
├── logs/               # Логи заявок (создаётся автоматически)
├── md/
│   └── cursor.md       # Документация
└── tz/
    └── tz.txt          # Техническое задание
```

## Технологии

- **HTML5** — семантическая разметка
- **CSS3** — BEM-методология, CSS-переменные, адаптивная вёрстка
- **JavaScript** — Vanilla JS, без библиотек
- **PHP** — обработка форм, отправка email

## CSS-переменные

Все цвета и отступы определены в `:root` в `css/style.css`:

### Цвета
- `--color-bg-main` — основной фон (#E5DDD4)
- `--color-bg-dark` — тёмный фон (#1F2938)
- `--color-primary` — винно-бордовый (#5A1D33)
- `--color-accent-blue` — пыльно-голубой (#8EA4B8)
- `--color-highlight-gold` — золотой акцент (#D3B46A)

### Типографика
- `--font-heading` — Cormorant Garamond (заголовки)
- `--font-sans` — Inter (основной текст)

## Секции лендинга

1. **Hero** — главный экран с CTA
2. **Services** — что входит в дизайн-проект (карточки с иконкой слева и текстом справа)
3. **Stages** — этапы работы (таймлайн)
4. **Tariffs** — 3 тарифа (Стандарт, Расширенный, Полный контроль)
5. **Portfolio** — галерея с табами по проектам
6. **Why Us** — преимущества студии
7. **Pains** — боли клиентов и решения
8. **Gifts** — подарки к проекту
9. **About** — о руководителе студии
10. **Reviews** — отзывы клиентов (8 реалистичных отзывов в сетке 2 колонки)
11. **FAQ** — аккордеон с вопросами
12. **Contact** — форма заявки и контакты

## Формы

### Основная форма (секция Contact)
Поля:
- Имя (обязательное)
- Телефон (обязательное, с маской)
- Тип объекта (select)
- Площадь (number)
- Этап (select)
- Комментарий (textarea)

### Модальная форма
Открывается по кнопкам "Консультация" и "Выбрать тариф".
Автозаполнение поля тарифа при выборе из секции Tariffs.

### Защита
- Honeypot-поле (скрытое)
- Возможность подключения reCAPTCHA (код готов)

## JavaScript функционал

### Основной функционал (`js/main.js`)
- **Sticky header** — при скролле
- **Мобильное меню** — бургер
- **Модальные окна** — с анимацией
- **Маска телефона** — +7 (___) ___-__-__
- **FAQ аккордеон** — раскрывающиеся ответы
- **Портфолио** — табы, lazy loading, lightbox
- **Scroll-анимации** — fade-in при появлении
- **Smooth scroll** — плавная прокрутка к якорям

### Планшетный функционал (`js/tablet.js`)
- **Touch-события** — оптимизация свайпов в lightbox
- **Адаптация портфолио** — оптимизация для планшетов
- **Lazy loading** — улучшенная загрузка изображений с приоритетом

### Мобильный функционал (`js/mobile.js`)
- **Touch-события** — оптимизация свайпов в lightbox и портфолио
- **Адаптация портфолио** — сетка 2 колонки для мобильных
- **Оптимизация меню** — улучшенная работа мобильного меню
- **Оптимизация форм** — предотвращение zoom на iOS, улучшенная работа с клавиатурой
- **Производительность** — оптимизация для мобильных устройств, поддержка reduced-motion
- **Lazy loading** — улучшенная загрузка изображений с увеличенным rootMargin

## API

### POST /api/send.php

Отправка формы.

**Параметры:**
- `name` — имя (обязательно)
- `phone` — телефон (обязательно)
- `form_type` — тип формы (consultation/tariff)
- `tariff` — выбранный тариф
- `object_type` — тип объекта
- `area` — площадь
- `stage` — этап
- `comment` — комментарий
- `utm_*` — UTM-метки

**Ответ:**
```json
{
  "success": true,
  "message": "Заявка успешно отправлена"
}
```

## Адаптивные брейкпоинты

- **Desktop** — ≥1200px (основной CSS)
- **Tablet** — 768–1199px (отдельные файлы `css/tablet.css` и `js/tablet.js`)
- **Mobile** — <768px (отдельные файлы `css/mobile.css` и `js/mobile.js`)

### Планшетная адаптация

Для планшетов созданы отдельные файлы, которые загружаются автоматически при определении устройства:

- **`css/tablet.css`** — стили для планшетов (768px-1199px)
  - Адаптация сеток (2 колонки вместо 3)
  - Оптимизация размеров шрифтов
  - Улучшенная компоновка секций
  - Слайдер тарифов с горизонтальной прокруткой
  
- **`js/tablet.js`** — JavaScript для планшетов
  - Оптимизация touch-событий (свайпы в lightbox)
  - Адаптация портфолио для планшетов (4 колонки)
  - Улучшенная загрузка изображений

### Мобильная адаптация

Для мобильных устройств созданы отдельные файлы, которые загружаются автоматически при определении устройства:

- **`css/mobile.css`** — стили для мобильных (max-width: 767px)
  - Все сетки переведены в одну колонку
  - Оптимизированные размеры шрифтов и отступов
  - Адаптация всех секций под мобильные экраны
  - Слайдер тарифов с горизонтальной прокруткой
  - Портфолио в сетке 2 колонки
  - Улучшенная работа мобильного меню
  - Оптимизация форм и модальных окон
  - Все карточки сервисов имеют иконку слева от текста в горизонтальной компоновке
  
- **`js/mobile.js`** — JavaScript для мобильных
  - Оптимизация touch-событий (свайпы в lightbox и портфолио)
  - Адаптация портфолио для мобильных (2 колонки)
  - Улучшенная работа мобильного меню (предотвращение скролла body)
  - Оптимизация форм (предотвращение zoom на iOS, inputmode)
  - Оптимизация производительности (debounce scroll, поддержка reduced-motion)
  - Улучшенная загрузка изображений с увеличенным rootMargin

Определение устройства происходит автоматически при загрузке страницы и при изменении размера окна. Файлы загружаются динамически только для соответствующих устройств, что оптимизирует загрузку для других устройств.

## Настройка

### Email
В файле `api/send.php` замените:
```php
$config = [
    'email_to' => 'your-email@example.com', // Реальный email
];
```

### База данных (опционально)
1. Создайте БД и выполните `api/db-schema.sql`
2. Раскомментируйте блок с PDO в `api/send.php`
3. Укажите параметры подключения

### Яндекс.Метрика
В `index.php` перед закрывающим тегом `</body>` добавьте:
```html
<script>
  window.YANDEX_METRIKA_ID = 12345678; // Ваш ID счётчика
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
  (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
  m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
  (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
  ym(window.YANDEX_METRIKA_ID, "init", {
    clickmap:true,
    trackLinks:true,
    accurateTrackBounce:true
  });
</script>
```

## Секция отзывов

Добавлено 8 реалистичных отзывов от клиентов:
- Елена Ковалёва (Квартира 85 м²)
- Дмитрий Соколов (Дом 120 м²)
- Мария Волкова (Квартира 65 м²)
- Андрей Петров (Таунхаус 95 м²)
- Ольга Морозова (Квартира 72 м²)
- Сергей Иванов (Дом 150 м²)
- Наталья Кузнецова (Квартира 58 м²)
- Владимир Новиков (Квартира 110 м²)

Отзывы отображаются в адаптивной сетке:
- Desktop: 2 колонки
- Tablet: 2 колонки
- Mobile: 1 колонка

Изначально показываются первые 4 отзыва, остальные скрыты. Кнопка "Показать ещё" загружает по 4 отзыва за раз с плавной анимацией появления. Кнопка автоматически скрывается, когда все отзывы показаны.

Каждая карточка содержит:
- Аватар с инициалами
- Имя клиента
- Тип и площадь проекта
- 5 звёзд рейтинга
- Текст отзыва

## Исправленные проблемы

### JavaScript
- ✅ Исправлена ошибка с неопределённой переменной `YANDEX_METRIKA_ID` — теперь используется `window.YANDEX_METRIKA_ID` с проверкой
- ✅ Исправлена навигация в lightbox портфолио — теперь корректно работает с массивом загруженных изображений
- ✅ Улучшена обработка ошибок форм — показываются сообщения от сервера
- ✅ Добавлена проверка существования `loadMoreBtn` перед использованием
- ✅ Исправлена ошибка `Cannot read properties of null (reading 'appendChild')` в функциях `loadMobileAssets` и `loadTabletAssets` — добавлена проверка наличия `document.body` перед добавлением скриптов

### PHP
- ✅ Все ответы API теперь возвращают JSON с правильными заголовками
- ✅ Добавлена кодировка UTF-8 для всех JSON-ответов
- ✅ Улучшена обработка ошибок валидации

### CSS
- ✅ Исправлено отображение header на тёмном фоне hero-секции
- ✅ Добавлены стили для header в состоянии scrolled
- ✅ Переработана структура карточек услуг (service-card) — иконка теперь расположена слева от текста, используется flex-контейнер с горизонтальным направлением
- ✅ Настроено позиционирование изображений в секциях Gifts и About — обрезка на 15% по центру (object-position: center 15%)
- ✅ Убрано сужение нечётного последнего элемента FAQ в мобильной версии — теперь все элементы имеют одинаковую ширину

## SEO

- Правильная иерархия H1–H3
- Meta description
- Alt-теги у изображений
- Семантическая разметка

## Аналитика (готово к подключению)

События для отслеживания:
- `form_submit` — отправка формы
- `whatsapp` — клик WhatsApp
- `telegram` — клик Telegram
- `phone_click` — клик по телефону
